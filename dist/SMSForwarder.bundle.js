(()=>{"use strict";const e=(new Date).getHours(),t=e>=22||e<7?"🔕":"";let o=global("SMSRB");const l=global("MMSRS"),n=/(\d+-\d+-\d+)|(\d{3,}-\d{3,})|\d{5,}/gm;let s=global("SMSRN");-1!==s.indexOf("#")&&(s=s.split("#")[1]);let a=" (#"+s+")";const c=a.match(/\s?\(?#?\+?\d+\)?/g);c&&c[0].length>0&&(a="");const S=global("SMSRF").replace("+852","");(async function(e={}){return(await fetch("https://gpt.zedo.dev/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ghu_XkT2WQ5mPumqUFjahkvUO88WwXF9h63iRyzY"},body:JSON.stringify(e)})).json()})({model:"gpt-4",messages:[{role:"system",content:"以上信息是一個 SMS，將內容重新格式化，分別顯示發信人、消費店鋪、消費金額、驗證碼(數純字)，OTP及信用卡號。"},{role:"user",content:o}]}).then((e=>{let s;e.choices.length>0&&(s=e.choices[0].message.content),setGlobal("TestMessage",s),s!==o&&(o=s);let c="%SMSRB"===o?"%MMSRS"===l?"無法獲取短訊內容":l:o;c=c.replace(n,(function(e){return"<code>"+e+"</code>"})),setGlobal("Message","✉ <b>"+S+a+"</b>\n"+function(e,t){let o=~~(e%12*2+t/30+.5);return o+=o<2?24:0,String.fromCharCode(55357,56655+(o+o%2*23)/2)}(global("SMSRT").split(".")[0],global("SMSRT").split(".")[1])+" "+global("SMSRD")+" "+global("SMSRT").replace(".",":")+" "+t+"\n\n"+c)})).then((e=>exit()))})();