(()=>{"use strict";new class{constructor(e,t,s){if(this.apiKey=e,this.chatID=t,this.apiURL=s,!this.chatID)return void flash("請設定 chatID。");if(!this.apiKey)return void flash("請設定 apiKey。");const i=(new Date).getHours();this.isNightTime=i>=22||i<7}sendMessage(e){if(!e.text)return void flash("不能發送空白訊息。");if(e.text.length>4096)return void flash("訊息超過 4096 字元。");const t={chat_id:this.chatID,text:e.text,parse_mode:e.parse_mode||"HTML",disable_notification:this.isNightTime},s={method:"POST",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:new URLSearchParams({...t,...e}),redirect:"follow"};fetch(`https://${this.apiURL}/bot${this.apiKey}/sendMessage`,s).then((e=>e.json())).then(e.resultHandler||(e=>{e.ok?flash("📩 信息已發送。"):flash("📩 信息發送異常："+e.description)})).catch(e.errorHandler||(e=>flash(`📩 信息發送異常：${e}`))).then(e.exitHandler||(()=>{"undefined"!=typeof exit&&exit()}))}}(global("apiKey"),global("chatID"),"api.telegram.org").sendMessage({text:global("Message")})})();